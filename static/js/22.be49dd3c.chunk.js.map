{"version":3,"sources":["views/Nft/market/Collections/index.tsx","../node_modules/lodash/_shuffleSelf.js","../node_modules/lodash/shuffle.js","../node_modules/lodash/_arrayShuffle.js","../node_modules/lodash/_baseShuffle.js"],"names":["ITEMS_PER_PAGE","SORT_FIELD","PageButtons","styled","div","Arrow","theme","colors","primary","Collectible","t","useTranslation","collections","useGetCollections","isMobile","useMatchBreakpoints","useState","sortField","setSortField","sortDirection","setSortDirection","page","setPage","maxPage","setMaxPage","useEffect","setTimeout","window","scroll","top","left","behavior","extraPages","collectionValues","Object","values","length","Math","floor","sortedCollections","useMemo","sort","a","b","createdAt","Date","parse","parseFloat","shuffle","handleSort","useCallback","newField","arrow","field","as","scale","color","textAlign","style","cursor","onClick","map","collection","volume","totalVolumeBNB","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","to","nftsBaseUrl","address","alignItems","src","avatar","width","height","mr","name","ml","numberTokensListed","totalSupply","slice","baseRandom","require","module","exports","array","size","index","lastIndex","rand","value","arrayShuffle","baseShuffle","isArray","copyArray","shuffleSelf"],"mappings":"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","file":"static/js/22.be49dd3c.chunk.js","sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react'\r\nimport {\r\n  Table,\r\n  Th,\r\n  Td,\r\n  Card,\r\n  Flex,\r\n  BnbUsdtPairTokenIcon,\r\n  Heading,\r\n  useMatchBreakpoints,\r\n  ProfileAvatar,\r\n  ArrowBackIcon,\r\n  Text,\r\n  ArrowForwardIcon,\r\n} from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\nimport { Link } from 'react-router-dom'\r\nimport { useGetCollections } from 'state/nftMarket/hooks'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport Page from 'components/Layout/Page'\r\nimport PageHeader from 'components/PageHeader'\r\nimport { nftsBaseUrl } from 'views/Nft/market/constants'\r\nimport shuffle from 'lodash/shuffle'\r\n\r\nexport const ITEMS_PER_PAGE = 10\r\n\r\nconst SORT_FIELD = {\r\n  createdAt: 'createdAt',\r\n  volumeBNB: 'totalVolumeBNB',\r\n  items: 'numberTokensListed',\r\n  supply: 'totalSupply',\r\n}\r\n\r\nexport const PageButtons = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-top: 0.2em;\r\n  margin-bottom: 1.2em;\r\n`\r\n\r\nexport const Arrow = styled.div`\r\n  color: ${({ theme }) => theme.colors.primary};\r\n  padding: 0 20px;\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n`\r\n\r\nconst Collectible = () => {\r\n  const { t } = useTranslation()\r\n  const collections = useGetCollections()\r\n  const { isMobile } = useMatchBreakpoints()\r\n  const [sortField, setSortField] = useState(null)\r\n  const [sortDirection, setSortDirection] = useState<boolean>(false)\r\n  const [page, setPage] = useState(1)\r\n  const [maxPage, setMaxPage] = useState(1)\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      window.scroll({\r\n        top: 0,\r\n        left: 0,\r\n        behavior: 'smooth',\r\n      })\r\n    }, 50)\r\n  }, [page])\r\n\r\n  useEffect(() => {\r\n    let extraPages = 1\r\n    const collectionValues = collections ? Object.values(collections) : []\r\n    if (collectionValues.length % ITEMS_PER_PAGE === 0) {\r\n      extraPages = 0\r\n    }\r\n    setMaxPage(Math.floor(collectionValues.length / ITEMS_PER_PAGE) + extraPages)\r\n  }, [collections])\r\n\r\n  const sortedCollections = useMemo(() => {\r\n    const collectionValues = collections ? Object.values(collections) : []\r\n\r\n    if (!sortField) {\r\n      return shuffle(collectionValues)\r\n    }\r\n\r\n    return collectionValues.sort((a, b) => {\r\n      if (a && b) {\r\n        if (sortField === SORT_FIELD.createdAt) {\r\n          if (a.createdAt && b.createdAt) {\r\n            return Date.parse(a.createdAt) - Date.parse(b.createdAt)\r\n              ? (sortDirection ? -1 : 1) * 1\r\n              : (sortDirection ? -1 : 1) * -1\r\n          }\r\n          return -1\r\n        }\r\n        return parseFloat(a[sortField]) > parseFloat(b[sortField])\r\n          ? (sortDirection ? -1 : 1) * 1\r\n          : (sortDirection ? -1 : 1) * -1\r\n      }\r\n      return -1\r\n    })\r\n  }, [collections, sortDirection, sortField])\r\n\r\n  const handleSort = useCallback(\r\n    (newField: string) => {\r\n      setSortField(newField)\r\n      setSortDirection(sortField !== newField ? true : !sortDirection)\r\n    },\r\n    [sortDirection, sortField],\r\n  )\r\n\r\n  const arrow = useCallback(\r\n    (field: string) => {\r\n      const directionArrow = !sortDirection ? '↑' : '↓'\r\n      return sortField === field ? directionArrow : ''\r\n    },\r\n    [sortDirection, sortField],\r\n  )\r\n\r\n  return (\r\n    <>\r\n      <PageHeader>\r\n        <Heading as=\"h1\" scale=\"xxl\" color=\"secondary\" data-test=\"nft-collections-title\">\r\n          {t('Collections')}\r\n        </Heading>\r\n      </PageHeader>\r\n      <Page>\r\n        <Card>\r\n          <Table>\r\n            <thead>\r\n              <tr>\r\n                <Th textAlign=\"left\" style={{ cursor: 'pointer' }} onClick={() => handleSort(SORT_FIELD.createdAt)}>\r\n                  {t('Collection')}\r\n                  {arrow(SORT_FIELD.createdAt)}\r\n                </Th>\r\n                <Th textAlign=\"left\" style={{ cursor: 'pointer' }} onClick={() => handleSort(SORT_FIELD.volumeBNB)}>\r\n                  {t('Volume')}\r\n                  {arrow(SORT_FIELD.volumeBNB)}\r\n                </Th>\r\n                {!isMobile && (\r\n                  <>\r\n                    <Th textAlign=\"left\" style={{ cursor: 'pointer' }} onClick={() => handleSort(SORT_FIELD.items)}>\r\n                      {t('Items')}\r\n                      {arrow(SORT_FIELD.items)}\r\n                    </Th>\r\n                    <Th textAlign=\"left\" style={{ cursor: 'pointer' }} onClick={() => handleSort(SORT_FIELD.supply)}>\r\n                      {t('Supply')}\r\n                      {arrow(SORT_FIELD.supply)}\r\n                    </Th>\r\n                  </>\r\n                )}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {sortedCollections\r\n                .map((collection) => {\r\n                  const volume = collection.totalVolumeBNB\r\n                    ? parseFloat(collection.totalVolumeBNB).toLocaleString(undefined, {\r\n                        minimumFractionDigits: 3,\r\n                        maximumFractionDigits: 3,\r\n                      })\r\n                    : '0'\r\n                  return (\r\n                    <tr key={collection.address} data-test=\"nft-collection-row\">\r\n                      <Td>\r\n                        <Link to={`${nftsBaseUrl}/collections/${collection.address}`}>\r\n                          <Flex alignItems=\"center\">\r\n                            <ProfileAvatar src={collection.avatar} width={48} height={48} mr=\"16px\" />\r\n                            {collection.name}\r\n                          </Flex>\r\n                        </Link>\r\n                      </Td>\r\n                      <Td>\r\n                        <Flex alignItems=\"center\">\r\n                          {volume}\r\n                          <BnbUsdtPairTokenIcon ml=\"8px\" />\r\n                        </Flex>\r\n                      </Td>\r\n                      {!isMobile && (\r\n                        <>\r\n                          <Td>{collection.numberTokensListed}</Td>\r\n                          <Td>{collection.totalSupply}</Td>\r\n                        </>\r\n                      )}\r\n                    </tr>\r\n                  )\r\n                })\r\n                .slice(ITEMS_PER_PAGE * (page - 1), page * ITEMS_PER_PAGE)}\r\n            </tbody>\r\n          </Table>\r\n          <PageButtons>\r\n            <Arrow\r\n              onClick={() => {\r\n                setPage(page === 1 ? page : page - 1)\r\n              }}\r\n            >\r\n              <ArrowBackIcon color={page === 1 ? 'textDisabled' : 'primary'} />\r\n            </Arrow>\r\n\r\n            <Text>{t('Page %page% of %maxPage%', { page, maxPage })}</Text>\r\n\r\n            <Arrow\r\n              onClick={() => {\r\n                setPage(page === maxPage ? page : page + 1)\r\n              }}\r\n            >\r\n              <ArrowForwardIcon color={page === maxPage ? 'textDisabled' : 'primary'} />\r\n            </Arrow>\r\n          </PageButtons>\r\n        </Card>\r\n      </Page>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Collectible\r\n","var baseRandom = require('./_baseRandom');\n\n/**\n * A specialized version of `_.shuffle` which mutates and sets the size of `array`.\n *\n * @private\n * @param {Array} array The array to shuffle.\n * @param {number} [size=array.length] The size of `array`.\n * @returns {Array} Returns `array`.\n */\nfunction shuffleSelf(array, size) {\n  var index = -1,\n      length = array.length,\n      lastIndex = length - 1;\n\n  size = size === undefined ? length : size;\n  while (++index < size) {\n    var rand = baseRandom(index, lastIndex),\n        value = array[rand];\n\n    array[rand] = array[index];\n    array[index] = value;\n  }\n  array.length = size;\n  return array;\n}\n\nmodule.exports = shuffleSelf;\n","var arrayShuffle = require('./_arrayShuffle'),\n    baseShuffle = require('./_baseShuffle'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of shuffled values, using a version of the\n * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to shuffle.\n * @returns {Array} Returns the new shuffled array.\n * @example\n *\n * _.shuffle([1, 2, 3, 4]);\n * // => [4, 1, 3, 2]\n */\nfunction shuffle(collection) {\n  var func = isArray(collection) ? arrayShuffle : baseShuffle;\n  return func(collection);\n}\n\nmodule.exports = shuffle;\n","var copyArray = require('./_copyArray'),\n    shuffleSelf = require('./_shuffleSelf');\n\n/**\n * A specialized version of `_.shuffle` for arrays.\n *\n * @private\n * @param {Array} array The array to shuffle.\n * @returns {Array} Returns the new shuffled array.\n */\nfunction arrayShuffle(array) {\n  return shuffleSelf(copyArray(array));\n}\n\nmodule.exports = arrayShuffle;\n","var shuffleSelf = require('./_shuffleSelf'),\n    values = require('./values');\n\n/**\n * The base implementation of `_.shuffle`.\n *\n * @private\n * @param {Array|Object} collection The collection to shuffle.\n * @returns {Array} Returns the new shuffled array.\n */\nfunction baseShuffle(collection) {\n  return shuffleSelf(values(collection));\n}\n\nmodule.exports = baseShuffle;\n"],"sourceRoot":""}